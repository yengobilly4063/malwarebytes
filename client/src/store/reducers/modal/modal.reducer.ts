import { deleteModalData, getModalData, storeModalData } from "../../../common/local-storage";
import { IState, StoreStates } from "../../state.interfaces";
import { ModalActionType, ModalConstants, ModalState } from "./modal.types";

const initialState: ModalState = { isOpen: false, data: getModalData() };

const modalReducer = (state: IState[StoreStates.MODAL] = initialState, action: ModalActionType) => {
  switch (action.type) {
    case ModalConstants.OPEN: {
      storeModalData(action.payload);
      return {
        ...state,
        isOpen: true,
        data: action.payload,
      };
    }

    case ModalConstants.CLOSE: {
      deleteModalData();
      return {
        ...state,
        isOpen: false,
        data: undefined,
      };
    }
    default:
      return state;
  }
};
export const getModalState = (state: IState) => state[StoreStates.MODAL];

export default modalReducer;
