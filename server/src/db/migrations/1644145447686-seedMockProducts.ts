import { Product } from "../entities/product.entity";
import { getRepository, MigrationInterface, QueryRunner, Repository } from "typeorm";
import { products } from "../mock-data";

const tableName = "products";
const columnNames = ["id", "name", "description", "price", "quantity"];

export class seedMockProducts1644145447686 implements MigrationInterface {
  public async up(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`use malwarebytes`);

    const productRepository: Repository<Product> = getRepository(Product);

    products.map(async (product: Product) => {
      await productRepository.save({ ...product });
    });
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`use malwarebytes`);

    const productRepository: Repository<Product> = getRepository(Product);

    products.map(async (product: Product) => {
      await productRepository.delete({ id: product.id });
    });
  }
}
